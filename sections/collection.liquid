{% assign current_collection = collection %}

{% include "attribute-collection-sort-titles" %}
{% include "attribute-collection-sort-values" %}
{% include "attribute-collection-sort-by" %}
{% include "attribute-collection-filters" %}

{% include "collection-hero" %}

{% include "breadcrumb" %}
{% include "json-swatch" %}

<style>.findify-component-spinner,.findify-component-spinner:after{border-radius:50%;width:60px;height:60px}.findify-component-spinner{margin:60px auto 0!important;position:relative;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-animation:findify-component-spinner-animation .7s infinite cubic-bezier(.67,.35,.7,.8);animation:findify-component-spinner-animation .7s infinite cubic-bezier(.67,.35,.7,.8);-ms-transform-origin:50% 50%;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;border-top:3px solid #eaeaea;border-right:3px solid #eaeaea;border-bottom:3px solid #eaeaea;border-left:3px solid #c6c6c6}@-webkit-keyframes findify-component-spinner-animation{0%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}100%{-webkit-transform:rotate(450deg);transform:rotate(450deg)}}@keyframes findify-component-spinner-animation{0%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}100%{-webkit-transform:rotate(450deg);transform:rotate(450deg)}}</style>
<div data-findify="search" style="min-height: 400px;">
  <div class="findify-component-spinner"></div>
  <div class="findify-fallback" style="display:none;">

      <div class="padding-4 large--padding-8">
      {% include 'searchanise-navigation' %}
      </div>

      {% comment %}
      {% paginate collection.products by section.settings.pagination_limit %}
        <div class="padding-vertical-4">
          <div class="text-center large--padding-horizontal-16">
            <div class="inline-flex items-center justify-center margin-vertical-12 border border-width-1 border-radius-5">
              {% if collection_filters %}
                  {% include "collection-filters" %}
              {% endif %}

              {% include "collection-sort" %}
            </div>

            <div class="flex justify-between">
              {% assign column_count_desktop = section.settings.column_limit_desktop %}
              {% assign column_count_mobile = section.settings.column_limit_mobile %}
              <div class="width-100">
                <div class="grid grid-gap-4 columns-{{ column_count_mobile }} large--columns-{{ column_count_desktop }}">
                  {% for product in collection.products %}
                    <div class="width-100">
                      {% include "product-thumbnail" %}
                    </div>
                  {% endfor %}
                </div>

                {% if paginate.pages > 1 %}
                  <div class="text-center">
                    {% include "pagination-custom" %}
                  </div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      {% assign sp_paginate_by = paginate.page_size %}{% endpaginate %}
      {% endcomment %}

    </div>
  </div>    

{% if sp_paginate_by %}{% render 'spurit_po2_collection_template_snippet', paginate_by: sp_paginate_by %}{% endif %}{% schema %}
{
  "name": "Collection content",
  "settings": [
    {
      "type": "header",
      "content": "Hero"
    },
    { 
      "type": "text", 
      "id": "hero_min_height", 
      "label": "Desktop minimum height (in px)", 
      "default": "304"
    }, 
    { 
      "type": "text", 
      "id": "hero_min_height_mobile", 
      "label": "Mobile minimum height (in px)", 
      "default": "200"
    }, 
    {
      "type": "header",
      "content": "Product layout"
    },
    {
      "type": "number",
      "id": "pagination_limit",
      "label": "Products per page",
      "default": 20
    },
    {
      "type": "number",
      "id": "column_limit_desktop",
      "label": "Products per row (desktop)",
      "default": 3
    },
    {
      "type": "number",
      "id": "column_limit_mobile",
      "label": "Products per row (mobile)",
      "default": 1
    },
    {
      "type": "header",
      "content": "Sorting"
    },
    {
      "type": "checkbox",
      "id": "sort_enabled_1",
      "label": "Manual",
      "default": true
    },
    {
      "label": "Title",
      "type": "text",
      "id": "sort_title_1",
      "default": "Featured"
    },
    {
      "type": "checkbox",
      "id": "sort_enabled_2",
      "label": "Best Selling",
      "default": true
    },
    {
      "label": "Title",
      "type": "text",
      "id": "sort_title_2",
      "default": "Top Selling"
    },
    {
      "type": "checkbox",
      "id": "sort_enabled_3",
      "label": "Alphabetically, A-Z",
      "default": true
    },
    {
      "label": "Title",
      "type": "text",
      "id": "sort_title_3",
      "default": "Alphabetically, A-Z"
    },
    {
      "type": "checkbox",
      "id": "sort_enabled_4",
      "label": "Alphabetically, Z-A",
      "default": true
    },
    {
      "label": "Title",
      "type": "text",
      "id": "sort_title_4",
      "default": "Alphabetically, Z-A"
    },
    {
      "type": "checkbox",
      "id": "sort_enabled_5",
      "label": "Price, low to high",
      "default": true
    },
    {
      "label": "Title",
      "type": "text",
      "id": "sort_title_5",
      "default": "Price, low to high"
    },
    {
      "type": "checkbox",
      "id": "sort_enabled_6",
      "label": "Price, high to low",
      "default": true
    },
    {
      "label": "Title",
      "type": "text",
      "id": "sort_title_6",
      "default": "Price, high to low"
    },
    {
      "type": "checkbox",
      "id": "sort_enabled_7",
      "label": "Date, new to old",
      "default": true
    },
    {
      "label": "Title",
      "type": "text",
      "id": "sort_title_7",
      "default": "Date, new to old"
    },
    {
      "type": "checkbox",
      "id": "sort_enabled_8",
      "label": "Date, old to new",
      "default": true
    },
    {
      "label": "Title",
      "type": "text",
      "id": "sort_title_8",
      "default": "Date, old to new"
    }
  ]
}
{% endschema %}
