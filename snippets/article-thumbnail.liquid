{% if article.metafields.custom_fields["thumbnail_image"] != blank %}
  {% assign image_url = article.metafields.custom_fields["thumbnail_image"] %}
{% elsif article.image %}
  {% assign image_url = article | img_url: "800x800", crop: "center" %}
{% else %}
  {% assign image_url = false %}
{% endif %}

{% assign description = article.excerpt_or_content | strip_html | truncatewords: 35 %}

{% assign call_to_action = section.settings.article_thumbnail_call_to_action %}

<div class="width-50 large--width-25 text-center padding-4" data-comment-count="{{ article.comments_count }}">
  <a href="{{ article.url }}" class="block aspect-ratio-1x1 relative hover-parent">
    <div class="absolute absolute-fill">
      <img class="object-fit-cover object-fit-center" data-src="{{ image_url }}" data-no-resize />
    </div>

    <span class="letter-spacing-1 font-family-heading text-uppercase hover-child absolute position-center background-white text-primary padding-horizontal-4 padding-vertical-2">View</span>
  </a>

  <div class="border border-width-1">
    <h2 class="font-bold font-size-3 text-uppercase letter-spacing-1 padding-horizontal-3 margin-bottom-2 margin-top-4 font-family-heading">
      <a href="{{ article.url }}" class="link">
        {{ article.title | strip_html | truncate: 45 }}
      </a>
    </h2>

    <p class="font-size-1 font-family-heading letter-spacing-1 text-uppercase margin-top-2 margin-bottom-4">{{ article.published_at | date: "%b %d, %Y" }}</p>
  </div>
</div>
